# 水位异常检测系统

## 项目简介

本项目是一个基于机器学习的水位异常检测系统，能够识别水位数据中的异常模式，包括突发异常和缓变异常。系统使用隔离森林(Isolation Forest)进行初步异常检测，然后使用LSTM深度学习模型对时间序列数据进行分析，预测潜在的异常情况。

## 项目结构

```
├── data_processor.py     # 数据处理模块
├── anomaly_detector.py   # 异常检测模块
├── visualization.py      # 可视化模块
├── alert_manager.py      # 报警管理模块
├── main.py               # 主程序入口
├── data.csv              # 原始数据文件
└── water_level_anomaly_results.csv  # 分析结果文件（运行后生成）
```

## 功能特点

1. **数据预处理**：自动加载和预处理水位数据，包括标准化、归一化等操作
2. **异常检测**：使用隔离森林算法进行初步异常检测
3. **深度学习预测**：使用LSTM模型对时间序列数据进行分析，预测异常情况
4. **缓变异常识别**：能够识别水位缓慢上升但具有潜在风险的情况
5. **可视化分析**：提供多种图表直观展示水位变化和异常检测结果
6. **报警管理**：根据异常程度触发不同级别的报警，并记录报警日志

## 安装依赖

本项目需要以下Python库：

```bash
pip install pandas numpy matplotlib scikit-learn tensorflow
```

## 使用方法

1. 确保已安装所有依赖库
2. 将原始数据文件`data.csv`放在项目根目录下
3. 运行主程序：

```bash
python main.py
```

4. 程序将自动执行以下步骤：
   - 加载和预处理数据
   - 使用隔离森林进行异常检测
   - 训练LSTM模型
   - 预测异常情况
   - 识别缓变异常
   - 生成可视化图表
   - 触发报警（如有异常）
   - 保存分析结果

## 注意事项

- 如果遇到TensorFlow相关错误，请确保正确安装了TensorFlow库
- 注意所用到的python库版本（Tensorflow推荐版本：2.19.0）
- 数据文件格式应为CSV，包含时间列和水位数据列
- 分析结果将保存在`water_level_anomaly_results.csv`文件中

## 自定义配置

可以通过修改`main.py`文件中的参数来自定义系统行为：

- 调整LSTM模型参数（层数、神经元数量等）
- 修改报警阈值
- 更改缓变异常的判定条件
- 自定义可视化图表样式
